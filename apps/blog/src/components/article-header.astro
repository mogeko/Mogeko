---
import Link from "@/components/ui/link.astro";
import { format } from "date-fns";
import { LuCalendarDays, LuTags, LuDot } from "react-icons/lu";
import type { CollectionEntry } from "astro:content";
import type { HTMLAttributes } from "astro/types";

const { class: className, data, ...props } = Astro.props;

type Props = {
  data: CollectionEntry<"posts">["data"];
} & HTMLAttributes<"header">;
---

<header class:list={["flex flex-col items-start", className]} {...props}>
  <h1
    class:list={[
      "flex-1 scroll-m-20 break-words text-4xl font-[900] leading-[3rem]",
      data.subtitle ? "mb-2" : "mb-7",
    ]}
  >
    {data.title}
  </h1>
  {
    data.subtitle && (
      <h2 class="text-secondary mb-7 break-words text-2xl font-bold">
        {data.subtitle}
      </h2>
    )
  }
  <section class="mb-8 flex flex-row items-center justify-start gap-2 text-sm">
    <time class="inline-flex items-center">
      <LuCalendarDays className="text-primary mr-1 h-4 w-4" />
      {format(data.date, "PPP")}
    </time>
    <LuDot className="h-4 w-4" />
    {
      data.tags && (
        <div class="text-accent inline-flex items-center gap-2">
          <LuTags className="h-4 w-4 mr-[-0.25rem]" />
          {data.tags.map((tag: string) => (
            <Link href="" variant="tag">
              #{tag}
            </Link>
          ))}
        </div>
      )
    }
  </section>
</header>
